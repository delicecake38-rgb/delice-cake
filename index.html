<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Délices Cake - Boutique de Tiramisu Artisanal</title>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Icons -->
    <script src="https://kit.fontawesome.com/4f6b9c5e56.js" crossorigin="anonymous"></script>

    <style>
        /* ====== VARIABLES & RESET ====== */
        :root {
            --cafe: #8B4513;
            --cafe-clair: #A67B5B;
            --creme: #F9F5F0;
            --creme-fonce: #F1E6D2;
            --chocolat: #5C3D2E;
            --blanc: #FFFFFF;
            --texte: #5C3D2E;
            --texte-clair: #7D5D3F;
            --success: #4CAF50;
            --shadow: 0 8px 30px rgba(0,0,0,0.08);
            --shadow-hover: 0 15px 40px rgba(0,0,0,0.12);
            --radius: 16px;
            --transition: .3s cubic-bezier(0.4,0,0.2,1);
        }
        * {
            margin: 0; padding: 0; box-sizing: border-box;
        }
        body {
            font-family: "Segoe UI", sans-serif;
            line-height: 1.7;
            background: var(--creme);
            color: var(--texte);
        }
        .container { max-width: 1200px; margin: auto; padding: 0 20px; }
        section { padding: 80px 0; }
        h1, h2, h3 { color: var(--cafe); margin-bottom: 24px; font-weight: 700; }

        /* ===== HEADER ===== */
        header {
            background: linear-gradient(135deg, var(--cafe), var(--chocolat));
            padding: 20px 0;
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .nav-container {
            display: flex; justify-content: space-between; align-items: center;
            max-width: 1200px; margin: auto; padding: 0 20px;
        }
        .logo-header { font-size: 1.8rem; color: var(--blanc); font-weight: 700; }
        .nav-links { display: flex; gap: 40px; }
        .nav-links a {
            color: var(--blanc); text-decoration: none; font-weight: 500;
            padding: 8px 16px; border-radius: 25px; transition: var(--transition);
        }
        .nav-links a:hover { background: rgba(255,255,255,.15); transform: translateY(-2px); }
        .nav-links a.active { background: rgba(255,255,255,.25); }

        /* ===== HERO ===== */
        #partie1 {
            background: linear-gradient(135deg, var(--creme-fonce), var(--creme));
            text-align: center;
            padding: 100px 0;
        }
        .hero-subtitle {
            font-size: 1.2rem; color: var(--texte-clair);
            margin-bottom: 40px; max-width: 600px; margin: auto;
        }
        .video-container {
            max-width: 800px; margin: auto; border-radius: 16px;
            overflow: hidden; box-shadow: var(--shadow);
            transition: var(--transition);
        }
        .video-container:hover {
            transform: translateY(-8px); box-shadow: var(--shadow-hover);
        }
        .video-placeholder {
            background: linear-gradient(135deg, var(--cafe), var(--chocolat));
            height: 300px; border-radius: 16px;
        }

        /* ===== PRODUITS ===== */
        .produits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px,1fr));
            gap: 40px;
        }
        .produit {
            background: var(--blanc); border-radius: 16px;
            overflow: hidden; box-shadow: var(--shadow);
            transition: var(--transition);
            display: flex; flex-direction: column;
        }
        .produit:hover { transform: translateY(-10px); }

        .produit-media {
            height: 220px; overflow: hidden;
            background: var(--creme-fonce);
        }
        .produit-media img {
            width: 100%; height: 100%; object-fit: cover;
            transition: .3s;
        }
        .produit:hover img { transform: scale(1.05); }

        .produit-info {
            padding: 24px; display: flex; flex-direction: column;
            flex-grow: 1;
        }
        .produit-header {
            display: flex; justify-content: space-between; align-items: flex-start;
        }
        .produit-nom { font-size: 1.3rem; font-weight: 700; color: var(--chocolat); }
        .produit-prix {
            font-weight: 700; font-size: 1.3rem; background: var(--creme);
            padding: 6px 14px; border-radius: 20px;
        }
        .produit-description { color: var(--texte-clair); margin: 16px 0; }

        .btn-ajouter {
            margin-top: auto;
            background: linear-gradient(135deg, var(--cafe), var(--chocolat));
            padding: 14px; color: white; border: none; border-radius: 12px;
            cursor: pointer; font-weight: 600; transition: var(--transition);
        }
        .btn-ajouter:hover { transform: translateY(-2px); }

        .loading { text-align: center; padding: 40px; color: var(--cafe); }

        footer {
            background: linear-gradient(135deg, var(--chocolat), #3a251a);
            color: white; text-align: center; padding: 40px 0; margin-top: 60px;
        }
    </style>
</head>

<body>
    <header>
        <div class="nav-container">
            <div class="logo-header">Délices Cake</div>
            <nav class="nav-links">
                <a href="index.html" class="active">Accueil</a>
                <a href="panier.html">Panier (<span id="nb-articles">0</span>)</a>
            </nav>
        </div>
    </header>

    <section id="partie1">
        <div class="container">
            <h1>Délices Cake</h1>
            <p class="hero-subtitle">Découvrez nos tiramisus artisanaux préparés avec passion</p>
            <div class="video-container">
                <div class="video-placeholder"></div>
            </div>
        </div>
    </section>

    <section id="partie2">
        <div class="container">
            <h2 style="text-align:center">Nos Créations Signature</h2>
            <div id="produits-grid" class="produits-grid">
                <div class="loading">Chargement des produits...</div>
            </div>
        </div>
    </section>

    <footer>
        © 2025 Délices Cake — Tous droits réservés
    </footer>

    <script>
        /* -------------------------
           SUPABASE CONFIG
        --------------------------*/
        const supabase = supabase.createClient(
            "https://rqpruupnklbfbzygvifn.supabase.co",
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdX..."
        );

        /* -------------------------
           AFFICHER PRODUITS
        --------------------------*/
        async function chargerProduits() {
            const grid = document.getElementById("produits-grid");

            const { data, error } = await supabase.from("produits").select("*");

            if (error) {
                grid.innerHTML = `<p class="error">Erreur lors du chargement.</p>`;
                return;
            }

            if (!data.length) {
                grid.innerHTML = `<p>Aucun produit disponible.</p>`;
                return;
            }

            grid.innerHTML = "";

            data.forEach(prod => {
                grid.innerHTML += `
                <div class="produit">
                    <div class="produit-media">
                        <img src="${prod.image}" alt="${prod.nom}">
                    </div>
                    <div class="produit-info">
                        <div class="produit-header">
                            <h3 class="produit-nom">${prod.nom}</h3>
                            <div class="produit-prix">${prod.prix}€</div>
                        </div>
                        <p class="produit-description">${prod.description}</p>

                        <button class="btn-ajouter" onclick="ajouterPanier(${prod.id})">
                            Ajouter au panier
                        </button>
                    </div>
                </div>`;
            });
        }

        /* -------------------------
           PANIER LOCALSTORAGE
        --------------------------*/
        function mettreAJourCompteur() {
            const panier = JSON.parse(localStorage.getItem("panier") || "[]");
            document.getElementById("nb-articles").textContent = panier.length;
        }

        function ajouterPanier(id) {
            let panier = JSON.parse(localStorage.getItem("panier") || "[]");
            panier.push(id);
            localStorage.setItem("panier", JSON.stringify(panier));
            mettreAJourCompteur();
        }

        /* -------------------------
           INIT
        --------------------------*/
        chargerProduits();
        mettreAJourCompteur();
    </script>

</body>
</html>
